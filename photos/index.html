<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Photos — Gallery</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="/assets/photos.css">
    <link rel="icon" type="image/x-icon" href="assets/images/favicon.png">

    <!-- Non-destructive: hide any per-folder "Download ZIP" buttons if they appear -->
    <style>
      /* This simply hides elements with the folder-download class (reversible) */
      .folder-download { display: none !important; }
    </style>
  </head>
  <body>
    <script>document.body.classList.add(localStorage.getItem('theme')||'dark')</script>

    <div class="menu-btn-container">
      <div class="container">
        <button type="button" class="menu-btn">menu</button>
      </div>
    </div>

    <nav class="nav hidden">
      <ol class="nav-items">
        <li class="nav-item"><a href="/">Home</a></li>
        <li class="nav-item"><a href="/photos">Photos</a></li>
        <li class="nav-item"><a href="/#work">My Work</a></li>
  <li class="nav-item"><a href="/#about-me">About</a></li>
  <li class="nav-item"><a href="/#skills">My Skills</a></li>
        <li class="nav-item">
          <a href="/#contact" data-focused="last-focused">Contact</a>
        </li>
      </ol>
    </nav>

    <header class="header photos-header">
      <div class="container">
        <div class="header-content">
          <h1 class="h1"><span>Photos</span></h1>
          <p class="header-text">
            <!--<span>Browse my Photos</span>-->
          </p>
        </div>
      </div>
    </header>

<main>
  <section class="container gallery-section">
    <div class="gallery-controls">
      <div class="controls-right">
        <a href="photos.zip" download="photos.zip" id="download-all-root" class="btn btn-cta" title="Download everything in visible folders">
          Download All Visible
        </a>
      </div>
    </div>

    <div id="folders-root" class="folders-root to-top" aria-live="polite"></div>
  </section>
</main>


    <div id="zip-global-placeholder"></div>

    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <nav>
            <ol class="footer-links">
              <li class="footer-link">
                <a title="GitHub" href="https://github.com/Axion-Industries" target="_blank" rel="noopener">
                  <img loading="lazy" src="/assets/images/social-links/github.svg" alt="GitHub" />
                </a>
              </li>
              <li class="footer-link">
                <a title="GitLab" href="https://gitlab.com/Axion-Industries" target="_blank" rel="noopener">
                  <img loading="lazy" src="/assets/images/social-links/gitlab.svg" alt="GitLab" />
                </a>
              </li>
              <li class="footer-link">
                <a title="Instagram" href="https://www.instagram.com/@bogdanzogovic123" target="_blank" rel="noopener">
                  <img loading="lazy" src="/assets/images/social-links/instagram.svg" alt="Instagram" />
                </a>
              </li>
              <li class="footer-link">
                <a title="Threads" href="https://www.threads.com/@bogdanzogovic123" target="_blank" rel="noopener">
                  <img loading="lazy" src="/assets/images/social-links/threads.svg" alt="Threads" />
                </a>
              </li>
            </ol>
          </nav>
          <p class="footer-text">
            &copy; <span>2025</span> - Portfolio by <a target="_blank" rel="noopener" href="https://github.com/Axion-Industries">Bogdan Zogovic.</a>
          </p>
          <label class="theme-switch" for="theme-switch">
            <span>Dark Theme</span>
            <input type="checkbox" id="theme-switch" role="switch" />
          </label>
        </div>
      </div>
    </footer>

    <!-- Non-destructive helper: ensure "Download All Visible" actually downloads photos.zip -->
    <script>
      (function() {
        const el = document.getElementById('download-all-root');
        if (!el) return;

        // Ensure attributes exist (keeps original anchor intact)
        if (!el.getAttribute('href')) el.setAttribute('href', 'photos.zip');
        if (!el.getAttribute('download')) el.setAttribute('download', 'photos.zip');

        // Attach a safe click handler that triggers a programmatic download.
        // It preserves modifier-key behavior (open in new tab, etc.) and won't run if default already prevented.
        el.addEventListener('click', function(event) {
          try {
            if (event.defaultPrevented) return;
            // Respect user modifier keys (ctrl/cmd/shift/alt) so standard behaviors remain.
            if (event.ctrlKey || event.metaKey || event.shiftKey || event.altKey) return;

            event.preventDefault();

            const url = el.getAttribute('href') || 'photos.zip';
            // Create a temporary anchor to force the download attribute to be honored.
            const tmp = document.createElement('a');
            tmp.style.display = 'none';
            tmp.href = url;
            tmp.setAttribute('download', 'photos.zip');
            // Append, click, then remove
            document.body.appendChild(tmp);
            tmp.click();
            document.body.removeChild(tmp);

            // Fallback: navigate to the file after a short delay (some browsers may require navigation).
            setTimeout(function() {
              try { window.location.href = url; } catch (e) { /* ignore */ }
            }, 300);
          } catch (err) {
            // If anything goes wrong, do nothing — original anchor is still present and will work without JS.
            console.error('Download helper error:', err);
          }
        }, false);
      })();
    </script>

    <script src="/assets/photos.js" defer></script>
    <script src="/script.js" defer></script>
  </body>
</html>
